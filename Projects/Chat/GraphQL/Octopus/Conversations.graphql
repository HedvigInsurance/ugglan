query Conversations {
  currentMember {
    conversations {
        ...ConversationFragment
    }
    legacyConversation {
        ...ConversationFragment
    }
  }
}

fragment ConversationFragment on Conversation {
    statusMessage
    id
    createdAt
    newestMessage {
        ... MessageFragment
    }
    statusMessage
}

query ConversationMessages($conversationId: UUID!, $olderToken: String, $newerToken: String) {
  conversation(id: $conversationId) {
    id
    messagePage(olderToken: $olderToken, newerToken: $newerToken) {
      messages {
        ... MessageFragment
      }
      newerToken
      olderToken
    }
    statusMessage
    createdAt
  }
}

mutation ConversationSendMessage($input: ConversationSendMessageInput!) {
  conversationSendMessage(input: $input) {
    message {
        ... MessageFragment
    }
    userError {
      message
    }
  }
}
