query Conversations {
  currentMember {
    conversations {
        ...ConversationFragment
    }
    legacyConversation {
        ...ConversationFragment
    }
  }
}

query ConversationMessages($conversationId: UUID!, $olderToken: String, $newerToken: String) {
  conversation(id: $conversationId) {
    id
    messagePage(olderToken: $olderToken, newerToken: $newerToken) {
        ... MessagePageFragment
    }
    statusMessage
    createdAt
  }
}

mutation ConversationSendMessage($input: ConversationSendMessageInput!) {
  conversationSendMessage(input: $input) {
    message {
        ... MessageFragment
    }
    userError {
      message
    }
  }
}

mutation ConversationCreate {
  conversationCreate {
    ...ConversationFragment
  }
}

fragment ConversationFragment on Conversation {
    createdAt
    id
    isOpen
    newestMessage {
        ... MessageFragment
    }
    statusMessage
    subtitle
    title
}

fragment MessagePageFragment on ChatMessagePage {
    messages {
        ... MessageFragment
    }
    newerToken
    olderToken
}
