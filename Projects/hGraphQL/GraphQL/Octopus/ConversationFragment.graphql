
fragment ConversationFragment on Conversation {
    createdAt
    id
    isOpen
    unreadMessageCount
    newestMessage {
        ... MessageFragment
    }
    statusMessage
    isLegacy
    claim {
        id
        claimType
    }
}

fragment MessageFragment on ChatMessage {
    id
    sender
    sentAt
    ... ChatMessageActionFragment
    ... ChatMessageFileFragment
    ... ChatMessageTextFragment
    ... ChatMessageAutomaticSuggestionsFragment
}

fragment ChatMessageActionFragment on ChatMessageAction {
    actionTitle
    actionUrl
    actionText: text
}

fragment ChatMessageAutomaticSuggestionsFragment on ChatMessageAutomaticSuggestions {
    id
    sender
    sentAt
    suggestions {
        ...ChatMessageAutomaticSuggestionFragment
    }
    escalationReference
}

fragment ChatMessageAutomaticSuggestionFragment on ChatMessageAutomaticSuggestion {
    text
    actionUrl
    actionTitle
}

fragment ChatMessageFileFragment on ChatMessageFile {
    signedUrl
    mimeType
}

fragment ChatMessageTextFragment on ChatMessageText {
    text
}
